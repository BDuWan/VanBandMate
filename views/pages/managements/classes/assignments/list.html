<div class="dialog-area">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="dialog-inner mg-t-30 mh-250">
                    <div class="data-table-list" style="padding: 0;">
                        <div class="basic-tb-hd row">
                            <div class="col-lg-10 col-sm-12">
                                <h5 class="tag-a">Students</h5>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <div class="dataTables_wrapper">
                                <table id="table-students" class="table table-striped dataTable c-f-dataTable">
                                    <thead>
                                    <tr>
                                        <th class="t-id">STT</th>
                                        <th>First Name</th>
                                        <th>Last Name</th>
                                        <th>Status</th>
                                        <th>Information</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function statusAssign(status){
        var stt;
        switch (status){
            case 1:
            {
                stt = "Has not been submitted";
                break;
            }
            case 2:
            {
                stt = "Submitted";
                break;
            }
            case 3:
            {
                stt = "Late submission";
                break;
            }
            default:{
                stt = "Has not been submitted";
            }

        }
        return stt;

    }
    $(document).ready(function () {
        var assignmentID = {{.Assignment.AssignmentID}};
        $.fn.dataTable.ext.errMode = 'none';
        var table_students = $('#table-students').DataTable({
            "processing": true,
            "serverSide": true,
            ajax: {
                url: '/managements/mng-classes/api/listUser/assignments/'+assignmentID,
                type: 'POST',
                "contentType": "application/json",
                "data": function (d) {
                    return JSON.stringify(d);
                }

            },
            columns: [
                {
                    "data": null,
                    "searchable": false,
                    "orderable": false,
                    "render": function (data, type, full, meta) {
                        return table_students.rows().count() > 0 ?
                            meta.row + meta.settings._iDisplayStart + 1 : 0;
                    }
                },
                {data: 'User.first_name'},
                {data: 'User.last_name'},
                {
                    data: 'status',
                    render:function (data){
                        return statusAssign(data);
                    }
                },
                {
                    data: 'assignment_id',
                    render: function (data, type, full, row) {
                        if (type === 'display') {

                            return `<div class="row" style="margin:0;">
                                          <div class="col-sm-12 t-center">
                                            <a href="/managements/mng-classes/assignment/user/${data}/${full.user_id}">
                                              <i class="fas fa-info-circle cl-ed" aria-hidden="true" title="Information"></i>
                                            </a>
                                          </div>
                                        </div>`;


                        }
                        return data;
                    }
                }
            ],

            "drawCallback": function (settings) {
                var api = this.api();
                var startIndex = api.context[0]._iDisplayStart;
                api.column(0, {page: 'current'}).nodes().each(function (cell, i) {
                    cell.innerHTML = startIndex + i + 1;
                });
            },
            "ordering": true,
            lengthMenu: [[5, 10], ['5', '10']],
        });
    });

</script>